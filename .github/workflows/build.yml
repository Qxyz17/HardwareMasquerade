name: Build Hardware Masquerade

on:
  workflow_dispatch:
    inputs:
      build_type:
        description: 'Build Type'
        required: true
        default: 'release'
        type: choice
        options:
          - release
          - debug
      platform:
        description: 'Platform'
        required: true
        default: 'x64'
        type: choice
        options:
          - x64
          - x86

jobs:
  build:
    runs-on: windows-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4
      
      - name: Run build script
        shell: cmd
        run: |
          echo "Running build script..."
          build.bat
      
      - name: Upload artifacts
        uses: actions/upload-artifact@v4
        with:
          name: HardwareMasquerade-${{ github.run_number }}
          path: |
            output/
            dist/
          if-no-files-found: warn
